# 故障排除指南

## 常见问题

### 1. "未发现任何节点"

**可能原因：**
- 订阅链接返回的内容格式不正确
- 订阅内容不是 Base64 编码
- 节点协议不支持（仅支持 VLESS、VMess、SS）

**解决方法：**
```bash
# 使用 -v 参数查看详细日志
./proxy-tester test --url "你的订阅链接" -v
```

查看日志中的：
- 下载内容长度是否正常
- 解析过程中的错误信息
- 跳过的节点格式

### 2. "下载订阅失败: EOF"

**可能原因：**
- 网络连接问题
- 服务器返回 gzip 压缩内容但解压失败
- SSL/TLS 证书问题

**解决方法：**
- 检查网络连接
- 尝试在浏览器中打开订阅链接
- 确认订阅链接是否有效

### 3. 所有节点都显示"超时"

**可能原因：**
- 超时时间设置过短
- 网络环境限制
- 节点确实不可用

**解决方法：**
```bash
# 增加超时时间到 10 秒
./proxy-tester test --url "你的订阅链接" -t 10

# 减少并发数避免网络拥塞
./proxy-tester test --url "你的订阅链接" -c 5 -t 10
```

### 4. IPv6 节点无法连接

**可能原因：**
- 本地网络不支持 IPv6
- ISP 未提供 IPv6 连接

**解决方法：**
- 这是正常现象，工具会自动跳过无法连接的 IPv6 节点
- 关注 IPv4 节点的测试结果

### 5. 测试速度很慢

**优化建议：**
```bash
# 增加并发数
./proxy-tester test --url "你的订阅链接" -c 20

# 减少超时时间
./proxy-tester test --url "你的订阅链接" -c 20 -t 3

# 组合使用
./proxy-tester test --url "你的订阅链接" -c 30 -t 2
```

**注意：** 并发数过高可能导致网络拥塞，建议根据网络环境调整。

## 调试技巧

### 查看详细日志
```bash
./proxy-tester test --url "你的订阅链接" -v
```

详细日志会显示：
- 订阅下载过程
- Base64 解码结果
- 每个节点的解析状态
- 测试进度和结果

### 测试单个节点

如果需要测试特定节点，可以：
1. 创建一个只包含该节点的订阅文件
2. 将节点链接 Base64 编码后保存
3. 使用本地文件服务器提供订阅

### 性能调优

**快速扫描（牺牲准确性）：**
```bash
./proxy-tester test --url "订阅链接" -c 50 -t 2
```

**精确测试（耗时较长）：**
```bash
./proxy-tester test --url "订阅链接" -c 5 -t 10
```

**推荐配置（平衡）：**
```bash
./proxy-tester test --url "订阅链接" -c 20 -t 3
```

## 错误代码说明

- **EOF**: 连接意外关闭，可能是网络问题或服务器问题
- **timeout**: 连接超时，增加 `-t` 参数值
- **connection refused**: 端口不可达，节点可能已失效
- **no such host**: DNS 解析失败，检查域名是否正确

## 获取帮助

```bash
# 查看帮助信息
./proxy-tester --help
./proxy-tester test --help
```

## 报告问题

如果遇到程序 bug，请提供：
1. 完整的错误信息
2. 使用 `-v` 参数的详细日志
3. Go 版本和 macOS 版本
4. 订阅链接格式示例（脱敏处理）
